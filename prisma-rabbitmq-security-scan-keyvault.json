{"options":[{"enabled":false,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"Bug","assignToRequestor":"true","additionalFields":"{}"}}],"variables":{"system.debug":{"value":"false","allowOverride":true}},"variableGroups":[{"variables":{"prisma-accesstoken":{"value":null,"isSecret":true},"prisma-consolerul":{"value":null,"isSecret":true}},"type":"AzureKeyVault","name":"prismacloud","description":"","id":4}],"properties":{},"tags":[],"_links":{"self":{"href":"https://dev.azure.com/nodeasset/2033a55f-ed8d-4a8e-9417-ea598d52af39/_apis/build/Definitions/121?revision=21"},"web":{"href":"https://dev.azure.com/nodeasset/2033a55f-ed8d-4a8e-9417-ea598d52af39/_build/definition?definitionId=121"},"editor":{"href":"https://dev.azure.com/nodeasset/2033a55f-ed8d-4a8e-9417-ea598d52af39/_build/designer?id=121&_a=edit-build-definition"},"badge":{"href":"https://dev.azure.com/nodeasset/2033a55f-ed8d-4a8e-9417-ea598d52af39/_apis/build/status/121"}},"jobAuthorizationScope":2,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"process":{"phases":[{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Create RabbitMQ Image","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"},"inputs":{"containerRegistry":"b2ba1b99-3ff1-4e03-8200-9005950d5d07","repository":"rabbitmq-prisma","command":"build","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"prisma","arguments":"","addPipelineData":"true","addBaseImageData":"true","container":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Prisma Cloud Compute Scan","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"9917dac2-0ff3-4b6a-b236-9baff3bbb99d","versionSpec":"3.*","definitionType":"task"},"inputs":{"scanType":"images","twistlockService":"b9b7e07b-50de-4eb8-a8a7-e0befc98c57e","artifact":"nodeasset.azurecr.io/rabbitmq-prisma:prisma","project":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Push RabbitMQ Image to ACR","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"},"inputs":{"containerRegistry":"b2ba1b99-3ff1-4e03-8200-9005950d5d07","repository":"rabbitmq-prisma","command":"push","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"prisma","arguments":"","addPipelineData":"true","addBaseImageData":"true","container":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Get Prisma Cloud Secrets From Azure KeyVault","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"a8515ec8-7254-4ffd-912c-86772e2b5962","versionSpec":"5.*","definitionType":"task"},"inputs":{"rootDirectory":"scripts","targetFiles":"**/*.sh","encoding":"auto","tokenPattern":"rm","tokenPrefix":"#{","tokenSuffix":"}#","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"true","actionOnNoFiles":"continue","enableTransforms":"false","transformPrefix":"(","transformSuffix":")","variableFiles":"","inlineVariables":"","variableSeparator":".","enableRecursion":"false","useLegacyPattern":"false","useLegacyEmptyFeature":"true","useDefaultValue":"false","emptyValue":"(empty)","defaultValue":"","enableTelemetry":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install TwistCLI","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"2.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"06ea7386-2504-48bc-aeee-8369bf9211ee","scriptType":"bash","scriptLocation":"inlineScript","scriptPath":"scripts/install-twistcli.sh","inlineScript":"curl -k -O -u 254f02ca-8de0-4059-9beb-963e9db7827e:fKzox8joJ+sKccnRA4SF6Nt195E= https://us-east1.cloud.twistlock.com/us-1-111573457/api/v1/util/twistcli;\nchmod a+x twistcli;","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Scan RabbitMQ Image","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"2.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"06ea7386-2504-48bc-aeee-8369bf9211ee","scriptType":"bash","scriptLocation":"inlineScript","scriptPath":"scripts/scan-image.sh","inlineScript":"./twistcli images scan --details --address https://us-east1.cloud.twistlock.com/us-1-111573457 --u 254f02ca-8de0-4059-9beb-963e9db7827e -p fKzox8joJ+sKccnRA4SF6Nt195E= nodeasset.azurecr.io/rabbitmq-prisma:prisma","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"true","powerShellIgnoreLASTEXITCODE":"false"}}],"name":"Agent job 1","refName":"Job_1","condition":"succeeded()","target":{"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":2}],"target":{"agentSpecification":{"identifier":"ubuntu-18.04"}},"type":1},"repository":{"properties":{"cleanOptions":"0","labelSources":"0","labelSourcesFormat":"$(build.buildNumber)","reportBuildStatus":"true","fetchDepth":"1","gitLfsSupport":"false","skipSyncSource":"false","checkoutNestedSubmodules":"false"},"id":"8f005204-deae-4342-81dd-43a221ce4c66","type":"TfsGit","name":"rabbitmq","url":"https://dev.azure.com/nodeasset/nodeasset/_git/rabbitmq","defaultBranch":"refs/heads/prisma","clean":"false","checkoutSubmodules":false},"processParameters":{},"quality":1,"authoredBy":{"displayName":"Earl Holland","url":"https://spsprodcus2.vssps.visualstudio.com/Afe6a893a-ea0d-4ccc-b93c-cdbeee879667/_apis/Identities/6b97a33e-60b3-6dcb-b757-8b441bbad2fd","_links":{"avatar":{"href":"https://dev.azure.com/nodeasset/_apis/GraphProfile/MemberAvatars/aad.YTQ5NDI5ZTItMDk5Mi03ODU0LWEwZjAtNGE2NDczMDkyZTA2"}},"id":"6b97a33e-60b3-6dcb-b757-8b441bbad2fd","uniqueName":"srcforce@outlook.com","imageUrl":"https://dev.azure.com/nodeasset/_apis/GraphProfile/MemberAvatars/aad.YTQ5NDI5ZTItMDk5Mi03ODU0LWEwZjAtNGE2NDczMDkyZTA2","descriptor":"aad.YTQ5NDI5ZTItMDk5Mi03ODU0LWEwZjAtNGE2NDczMDkyZTA2"},"drafts":[],"queue":{"_links":{"self":{"href":"https://dev.azure.com/nodeasset/_apis/build/Queues/69"}},"id":69,"name":"Azure Pipelines","url":"https://dev.azure.com/nodeasset/_apis/build/Queues/69","pool":{"id":9,"name":"Azure Pipelines","isHosted":true}},"id":121,"name":"prisma-rabbitmq-security-scan-keyvault","url":"https://dev.azure.com/nodeasset/2033a55f-ed8d-4a8e-9417-ea598d52af39/_apis/build/Definitions/121?revision=21","uri":"vstfs:///Build/Definition/121","path":"\\","type":2,"queueStatus":0,"revision":21,"createdDate":"2022-11-18T17:01:20.980Z","project":{"id":"2033a55f-ed8d-4a8e-9417-ea598d52af39","name":"nodeasset","url":"https://dev.azure.com/nodeasset/_apis/projects/2033a55f-ed8d-4a8e-9417-ea598d52af39","state":1,"revision":131,"visibility":0,"lastUpdateTime":"2022-11-16T18:21:41.680Z"}}